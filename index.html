<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS 主控系統</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #111827; }
        ::-webkit-scrollbar-thumb { background: #374151; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #4b5563; }
        .view { display: none; }
        .view.active { display: block; height: 100%; }
        iframe { width: 100%; height: 100%; border: 0; }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-900 border-r border-gray-800 flex flex-col flex-shrink-0">
            <div class="h-16 flex items-center justify-center border-b border-gray-800">
                <h1 class="text-2xl font-bold text-white">POS 系統</h1>
            </div>
            <nav class="flex-1 px-4 py-6 space-y-2">
                <a href="#dashboard-view" class="nav-link flex items-center px-4 py-2 text-lg rounded-lg bg-indigo-600 text-white">
                    <svg class="h-6 w-6 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/></svg>
                    儀表板
                </a>
                <a href="#customer-view" class="nav-link flex items-center px-4 py-2 text-lg rounded-lg hover:bg-gray-700 hover:text-white">
                    <svg class="h-6 w-6 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                    顧客點餐
                </a>
                <a href="#kds-view" class="nav-link flex items-center px-4 py-2 text-lg rounded-lg hover:bg-gray-700 hover:text-white">
                     <svg class="h-6 w-6 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v11.494m-9-5.747h18" /></svg>
                    廚房系統
                </a>
                <a href="#checkout-view" class="nav-link flex items-center px-4 py-2 text-lg rounded-lg hover:bg-gray-700 hover:text-white">
                    <svg class="h-6 w-6 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg>
                    結帳系統
                </a>
            </nav>
            <div class="p-4 border-t border-gray-800">
                <p id="system-time" class="text-center text-gray-400"></p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="h-16 bg-gray-900 border-b border-gray-800 flex items-center px-6 justify-between">
                <h2 id="view-title" class="text-2xl font-semibold text-white">儀表板</h2>
            </header>

            <!-- Views Container -->
            <div class="flex-1 overflow-y-auto bg-gray-900">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view active">
                    <iframe src="dashboard.html" title="儀表板"></iframe>
                </div>

                <!-- Customer Ordering View -->
                <div id="customer-view" class="view">
                   <iframe src="customer-view.html" title="顧客點餐系統"></iframe>
                </div>
                
                <!-- KDS View -->
                <div id="kds-view" class="view">
                     <iframe src="kds.html" title="廚房出餐系統"></iframe>
                </div>
                
                <!-- Checkout View -->
                <div id="checkout-view" class="view">
                     <iframe src="checkout.html" title="結帳系統"></iframe>
                </div>
            </div>
        </main>
    </div>

    <script>
        const dom = {
            navLinks: document.querySelectorAll('.nav-link'),
            views: document.querySelectorAll('.view'),
            viewTitle: document.getElementById('view-title'),
            systemTime: document.getElementById('system-time'),
        };

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Setup navigation
            dom.navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    switchView(targetId);
                });
            });

            // Setup clock
            updateTime();
            setInterval(updateTime, 1000);
        });

        // --- VIEW SWITCHING ---
        function switchView(viewId) {
            // Switch active view div
            dom.views.forEach(view => {
                view.classList.remove('active');
                if (view.id === viewId) {
                    view.classList.add('active');
                }
            });

            // Update sidebar link styles
            dom.navLinks.forEach(link => {
                link.classList.remove('bg-indigo-600', 'text-white');
                link.classList.add('hover:bg-gray-700', 'hover:text-white');
                if (link.getAttribute('href') === `#${viewId}`) {
                    link.classList.add('bg-indigo-600', 'text-white');
                    link.classList.remove('hover:bg-gray-700', 'hover:text-white');
                    dom.viewTitle.textContent = link.textContent.trim();
                }
            });

            // ** NEW: Refresh the content of the selected view's iframe **
            const activeView = document.getElementById(viewId);
            if (activeView) {
                const iframe = activeView.querySelector('iframe');
                if (iframe && iframe.contentWindow) {
                    // Reload the iframe's content
                    iframe.contentWindow.location.reload();
                }
            }
        }
        
        // --- UTILITIES ---
        function updateTime() {
            const now = new Date();
            dom.systemTime.textContent = now.toLocaleTimeString('zh-TW', { hour12: false });
        }
    </script>
</body>
</html>
